<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avnowledge NEET Preparation - Videos</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:600,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --sky-blue: #53b8e6;
            --sky-blue-light: #e3f5ff;
            --sky-blue-dark: #2186c4;
            --white: #fff;
            --text: #222;
            --shadow: 0 6px 24px rgba(70, 180, 255, 0.08);
        }

        body {
            margin: 0;
            background: linear-gradient(135deg, var(--sky-blue-light), var(--sky-blue));
            font-family: 'Montserrat', Arial, sans-serif;
            color: var(--text);
            min-height: 100vh;
        }

        header {
            background: var(--sky-blue-dark);
            color: var(--white);
            padding: 18px 0;
            text-align: center;
            font-size: 2rem;
            letter-spacing: 2px;
            font-weight: 600;
            box-shadow: 0 2px 12px rgba(70,180,255,0.15);
        }

        .container {
            max-width: 900px;
            margin: 40px auto;
            background: var(--white);
            border-radius: 22px;
            box-shadow: var(--shadow);
            padding: 30px 28px 60px 28px;
        }

        .subject-list, .chapter-list {
            display: flex;
            gap: 32px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 32px 0;
        }

        .subject-card, .chapter-card {
            background: var(--sky-blue-light);
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(70, 180, 255, 0.07);
            padding: 36px 40px;
            min-width: 180px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.12s, box-shadow 0.12s;
            font-size: 1.18rem;
            font-weight: 600;
            color: var(--sky-blue-dark);
            border: 2px solid transparent;
        }
        .subject-card:hover, .chapter-card:hover {
            transform: translateY(-4px) scale(1.04);
            box-shadow: 0 8px 28px rgba(70,180,255,0.13);
            background: var(--sky-blue);
            color: var(--white);
            border: 2px solid var(--sky-blue-dark);
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--sky-blue-dark);
            font-size: 1.05rem;
            font-weight: 600;
            margin-bottom: 15px;
            cursor: pointer;
            transition: color 0.13s;
        }
        .back-btn:hover { color: var(--sky-blue); text-decoration: underline; }

        .video-page {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 0;
        }

        .video-area {
            flex: 1 1 350px;
            max-width: 520px;
        }
        .video-area video {
            width: 100%;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 17px;
        }

        .progress-section {
            margin-top: 8px;
        }
        .progress-label {
            font-size: 0.98rem;
            margin-bottom: 7px;
            color: var(--sky-blue-dark);
        }
        .progress-bar {
            width: 100%;
            background: var(--sky-blue-light);
            border-radius: 14px;
            overflow: hidden;
            height: 12px;
        }
        .progress-bar-inner {
            background: linear-gradient(90deg, var(--sky-blue), var(--sky-blue-dark));
            height: 100%;
            width: 0;
            transition: width .25s;
            border-radius: 14px 0 0 14px;
        }

        .notes-area {
            flex: 1 1 220px;
            background: #f9fbfe;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(70, 180, 255, 0.05);
            padding: 22px 20px;
            min-width: 200px;
            max-height: 410px;
            overflow-y: auto;
        }
        .notes-area h3 {
            margin-top: 0;
            color: var(--sky-blue-dark);
            margin-bottom: 13px;
            font-size: 1.15rem;
            font-weight: 600;
        }
        .notes-area ul {
            margin: 0;
            padding-left: 20px;
        }
        .notes-textarea {
            width: 100%;
            min-height: 70px;
            border-radius: 8px;
            border: 1px solid #b6d2ea;
            padding: 8px;
            font-family: inherit;
            font-size: 1rem;
            margin-bottom: 10px;
            resize: vertical;
            background: #fff;
            box-sizing: border-box;
        }
        .notes-save-btn {
            background: var(--sky-blue-dark);
            color: var(--white);
            border: none;
            padding: 7px 16px;
            border-radius: 7px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 12px;
        }
        .notes-save-btn:active {
            background: var(--sky-blue);
        }
        .notes-saved-indicator {
            color: #43b66a;
            font-size: 0.93em;
            margin-left: 11px;
            transition: opacity 0.25s;
        }

        .reports-section {
            margin-top: 40px;
            background: #f3faff;
            border-radius: 15px;
            padding: 28px 22px;
            box-shadow: 0 2px 12px rgba(70,180,255,0.07);
        }
        .report-bar {
            background: #eee;
            border-radius: 5px;
            overflow: hidden;
            width: 220px;
            height: 18px;
            margin-bottom: 7px;
        }
        .report-bar-inner {
            background: #4caf50;
            height: 100%;
            transition: width .3s;
        }
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }
        .report-table th, .report-table td {
            padding: 6px 10px;
            text-align: left;
        }
        .report-table th {
            background: #eaf4fa;
            color: #2186c4;
        }
        .report-table td {
            background: #f8fbfe;
        }
        @media (max-width: 800px) {
            .container { padding: 14px 5px 30px 5px; }
            .video-page { flex-direction: column; gap: 16px; }
            .report-bar { width: 100%; }
        }
    </style>
</head>
<body>
    <header>Avnowledge NEET Videos</header>
    <div class="container" id="main-content">
        <!-- Dynamic Content Here -->
    </div>
    <script>
        // NEET 2026 chapters (simplified)
        const chapters = {
            Physics: [
                "Physical World & Measurement",
                "Kinematics",
                "Laws of Motion",
                "Work, Energy & Power",
                "System of Particles & Rotational Motion",
                "Gravitation",
                "Properties of Bulk Matter",
                "Thermodynamics",
                "Oscillations & Waves",
                "Electrostatics",
                "Current Electricity",
                "Magnetic Effects of Current & Magnetism",
                "Electromagnetic Induction & Alternating Currents",
                "Electromagnetic Waves",
                "Optics",
                "Dual Nature of Radiation & Matter",
                "Atoms & Nuclei",
                "Electronic Devices"
            ],
            Chemistry: [
                "Some Basic Concepts of Chemistry",
                "Structure of Atom",
                "Classification of Elements & Periodicity",
                "Chemical Bonding & Molecular Structure",
                "States of Matter: Gases & Liquids",
                "Thermodynamics",
                "Equilibrium",
                "Redox Reactions",
                "Hydrogen",
                "s-Block Element (Alkali & Alkaline earth metals)",
                "Some p-Block Elements",
                "Organic Chemistry: Basic Principles & Techniques",
                "Hydrocarbons",
                "Environmental Chemistry",
                "Solid State",
                "Solutions",
                "Electrochemistry",
                "Chemical Kinetics",
                "Surface Chemistry",
                "General Principles & Processes of Isolation of Elements",
                "p-Block Elements",
                "d- and f-Block Elements",
                "Coordination Compounds",
                "Haloalkanes & Haloarenes",
                "Alcohols, Phenols & Ethers",
                "Aldehydes, Ketones & Carboxylic Acids",
                "Organic Compounds Containing Nitrogen",
                "Biomolecules",
                "Polymers",
                "Chemistry in Everyday Life"
            ],
            Biology: [
                "The Living World",
                "Biological Classification",
                "Plant Kingdom",
                "Animal Kingdom",
                "Morphology of Flowering Plants",
                "Anatomy of Flowering Plants",
                "Structural Organisation in Animals",
                "Cell: The Unit of Life",
                "Biomolecules",
                "Cell Cycle & Cell Division",
                "Transport in Plants",
                "Mineral Nutrition",
                "Photosynthesis in Higher Plants",
                "Respiration in Plants",
                "Plant - Growth & Development",
                "Digestion & Absorption",
                "Breathing & Exchange of Gases",
                "Body Fluids & Circulation",
                "Excretory Products & Their Elimination",
                "Locomotion & Movement",
                "Neural Control & Coordination",
                "Chemical Coordination & Integration",
                "Reproduction in Organisms",
                "Sexual Reproduction in Flowering Plants",
                "Human Reproduction",
                "Reproductive Health",
                "Principles of Inheritance & Variation",
                "Molecular Basis of Inheritance",
                "Evolution",
                "Human Health & Diseases",
                "Strategies for Enhancement in Food Production",
                "Microbes in Human Welfare",
                "Biotechnology: Principles & Processes",
                "Biotechnology & Its Applications",
                "Organisms & Populations",
                "Ecosystem",
                "Biodiversity & Conservation",
                "Environmental Issues"
            ]
        };

        // Sample notes per chapter (replace with real content as needed)
        const sampleNotes = [
            "Key concepts are highlighted in the video.",
            "Remember important formulas and their derivations.",
            "Review previous year NEET questions for this chapter.",
            "Pay attention to diagrams and their labeling.",
            "Practice all solved and unsolved examples."
        ];

        // Progress tracking (stored in localStorage)
        function getProgressKey(subject, chapter) {
            return `avnowledge_progress_${subject}_${chapter}`;
        }
        function getChapterProgress(subject, chapter) {
            return parseInt(localStorage.getItem(getProgressKey(subject, chapter)) || "0", 10);
        }
        function setChapterProgress(subject, chapter, percent) {
            localStorage.setItem(getProgressKey(subject, chapter), percent);
        }

        // Notes storage (per chapter, in localStorage)
        function getNotesKey(subject, chapter) {
            return `avnowledge_notes_${subject}_${chapter}`;
        }
        function getChapterNotes(subject, chapter) {
            return localStorage.getItem(getNotesKey(subject, chapter)) || "";
        }
        function setChapterNotes(subject, chapter, notes) {
            localStorage.setItem(getNotesKey(subject, chapter), notes);
        }

        // Calculate report data
        function getProgressReport() {
            const report = {};
            let grandTotal = 0, grandCompleted = 0;
            for (const subject of Object.keys(chapters)) {
                const subjChaps = chapters[subject];
                let completed = 0;
                for (const chap of subjChaps) {
                    if (getChapterProgress(subject, chap) >= 100) completed++;
                }
                report[subject] = {
                    total: subjChaps.length,
                    completed,
                    percent: Math.round((completed / subjChaps.length) * 100)
                };
                grandTotal += subjChaps.length;
                grandCompleted += completed;
            }
            report.overall = {
                percent: Math.round((grandCompleted / grandTotal) * 100),
                completed: grandCompleted,
                total: grandTotal
            };
            return report;
        }

        // UI rendering
        const main = document.getElementById('main-content');

        function renderSubjects() {
            main.innerHTML = `
                <h2 style="text-align:center;color:var(--sky-blue-dark);margin-bottom:13px;">Choose a Subject</h2>
                <div class="subject-list">
                    ${Object.keys(chapters).map(subj => `
                        <div class="subject-card" onclick="chooseSubject('${subj}')">${subj}</div>
                    `).join('')}
                </div>
                <div class="reports-section" id="reports-section"></div>
            `;
            renderReportsSection();
        }

        function renderChapters(subject) {
            main.innerHTML = `
                <button class="back-btn" onclick="renderSubjects()">← Back to Subjects</button>
                <h2 style="text-align:center;color:var(--sky-blue-dark);margin-bottom:13px;">${subject} Chapters</h2>
                <div class="chapter-list">
                    ${chapters[subject].map(chap => `
                        <div class="chapter-card" onclick="chooseChapter('${subject}','${chap.replace(/'/g, "\\'")}')">
                            ${chap}
                        </div>
                    `).join('')}
                </div>
                <div class="reports-section" id="reports-section"></div>
            `;
            renderReportsSection(subject);
        }

        function renderVideoPage(subject, chapter) {
            // Always load the latest notes from localStorage
            const prog = getChapterProgress(subject, chapter);
            const notes = getChapterNotes(subject, chapter);
            main.innerHTML = `
                <button class="back-btn" onclick="renderChapters('${subject}')">← Back to ${subject}</button>
                <h2 style="text-align:center;color:var(--sky-blue-dark);margin-bottom:13px;">${chapter}</h2>
                <div class="video-page">
                    <div class="video-area">
                        <video id="videoPlayer" controls poster="https://img.icons8.com/color/200/000000/youtube-play.png">
                            <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                            Your browser does not support HTML video.
                        </video>
                        <div class="progress-section">
                            <div class="progress-label">Progress: <span id="progressVal">${prog}</span>%</div>
                            <div class="progress-bar"><div class="progress-bar-inner" id="progressBar" style="width:${prog}%"></div></div>
                        </div>
                        <button style="margin-top:16px;background:var(--sky-blue);color:var(--white);border:none;padding:9px 22px;border-radius:8px;font-weight:600;cursor:pointer;box-shadow:0 2px 6px rgba(70,180,255,0.11);" 
                            onclick="markComplete('${subject}','${chapter.replace(/'/g, "\\'")}')">Mark as Complete</button>
                    </div>
                    <div class="notes-area">
                        <h3>Notes</h3>
                        <textarea class="notes-textarea" id="notesTextarea" placeholder="Write your notes here...">${notes}</textarea>
                        <br>
                        <button class="notes-save-btn" id="saveNotesBtn">Save Notes</button>
                        <span class="notes-saved-indicator" id="notesSavedIndicator" style="opacity:0;">Saved!</span>
                        <ul style="margin-top:16px;">
                            ${sampleNotes.map(note => `<li>${note}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                <div class="reports-section" id="reports-section"></div>
            `;
            setTimeout(() => {
                const video = document.getElementById('videoPlayer');
                video.onended = () => {
                    setChapterProgress(subject, chapter, 100);
                    updateProgressUI(100);
                    renderReportsSection();
                };
                video.ontimeupdate = () => {
                    if(video.duration) {
                        let percent = Math.round((video.currentTime / video.duration) * 100);
                        if(percent > getChapterProgress(subject, chapter)) {
                            setChapterProgress(subject, chapter, percent);
                            updateProgressUI(percent);
                        }
                    }
                };
                // Notes save logic: stays forever in localStorage per chapter
                const notesTextarea = document.getElementById('notesTextarea');
                const saveBtn = document.getElementById('saveNotesBtn');
                const savedInd = document.getElementById('notesSavedIndicator');
                saveBtn.onclick = function() {
                    setChapterNotes(subject, chapter, notesTextarea.value);
                    savedInd.style.opacity = 1;
                    setTimeout(() => savedInd.style.opacity = 0, 1200);
                };
                // Optional: Autosave on Ctrl+Enter
                notesTextarea.addEventListener('keydown', function(e) {
                    if (e.ctrlKey && e.key === 'Enter') {
                        setChapterNotes(subject, chapter, notesTextarea.value);
                        savedInd.style.opacity = 1;
                        setTimeout(() => savedInd.style.opacity = 0, 1200);
                    }
                });
            }, 300);
            renderReportsSection(subject);
        }

        function updateProgressUI(percent) {
            document.getElementById('progressVal').textContent = percent;
            document.getElementById('progressBar').style.width = percent + '%';
        }

        // Reports Section Rendering
        function renderReportsSection(subject) {
            const el = document.getElementById('reports-section');
            const report = getProgressReport();
            if (!el) return;
            
            if (!subject) {
                // Overall report
                el.innerHTML = `
                    <h3 style="color:var(--sky-blue-dark);margin-top:0;">Reports & Progress</h3>
                    <div>
                        <b>Overall Progress: ${report.overall.completed} / ${report.overall.total} chapters (${report.overall.percent}%)</b>
                        <div class="report-bar"><div class="report-bar-inner" style="width:${report.overall.percent}%"></div></div>
                    </div>
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Completed</th>
                                <th>Total</th>
                                <th>Progress</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${Object.keys(chapters).map(subj => `
                                <tr>
                                    <td>${subj}</td>
                                    <td>${report[subj].completed}</td>
                                    <td>${report[subj].total}</td>
                                    <td>
                                        <div class="report-bar" style="width:100px;display:inline-block;vertical-align:middle;">
                                            <div class="report-bar-inner" style="width:${report[subj].percent}%;"></div>
                                        </div>
                                        <span style="margin-left:7px;">${report[subj].percent}%</span>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } else {
                // Subject report (per-chapter)
                const subjChaps = chapters[subject];
                el.innerHTML = `
                    <h3 style="color:var(--sky-blue-dark);margin-top:0;">${subject} Progress</h3>
                    <div>
                        <b>${report[subject].completed} / ${report[subject].total} chapters completed (${report[subject].percent}%)</b>
                        <div class="report-bar" style="width:160px;"><div class="report-bar-inner" style="width:${report[subject].percent}%"></div></div>
                    </div>
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>Chapter</th>
                                <th>Status</th>
                                <th>Progress</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${subjChaps.map(chap => {
                                const p = getChapterProgress(subject, chap);
                                return `
                                    <tr>
                                        <td>${chap}</td>
                                        <td>${p >= 100 ? "<span style='color:green;'>Completed</span>" : "Incomplete"}</td>
                                        <td>
                                            <div class="report-bar" style="width:80px;display:inline-block;vertical-align:middle;">
                                                <div class="report-bar-inner" style="width:${p}%;"></div>
                                            </div>
                                            <span style="margin-left:7px;">${p}%</span>
                                        </td>
                                    </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                `;
            }
        }

        // Expose navigation functions globally for onclick
        window.chooseSubject = function(subject) {
            renderChapters(subject);
        }
        window.chooseChapter = function(subject, chapter) {
            renderVideoPage(subject, chapter);
        }
        window.markComplete = function(subject, chapter) {
            setChapterProgress(subject, chapter, 100);
            updateProgressUI(100);
            renderReportsSection();
        }

        // Initial render
        renderSubjects();
    </script>
</body>
</html>
